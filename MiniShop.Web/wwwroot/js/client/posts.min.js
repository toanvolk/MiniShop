(function(){function f(t,i){$(".load-convert").show();let u="",f=n[t].split(" ");return i.forEach(function(n){let t=r.indexOf(n);u+=t==-1?n:f[t]}),$(".load-convert").hide(),u}function e(t){$(".load-convert").show();let u="",i=escape(t),f=escape(" ");while(i!=""){let t=i;if(n.forEach(function(n){let t=n.split(" ");t.forEach(function(n,t){let e=escape(n);if(i.startsWith(f)&&(u+=" ",i=i.replace(f,"")),i.startsWith(e)){u+=r[t];i=i.replace(e,"");return}})}),t==i){let n=i.split(f);n.length>0&&(u+=unescape(n[0]),i=i.replace(n[0],""))}}return $(".load-convert").hide(),u}function h(t){$(".load-convert").show();let r=-1,i=escape(t),u=escape(" ");while(i!=""){let t=i;if(n.forEach(function(n,t){let f=n.split(" ");f.forEach(function(n){let f=escape(n);if(i.startsWith(u)&&(i=i.replace(u,"")),i.startsWith(f)){i=i.replace(f,"");r=t;return}})}),t==i){let n=i.split(u);n.length>0&&(i=i.replace(n[0],""))}r>-1&&(i="")}return $(".load-convert").hide(),r}function o(n,t,i){typeof i!="undefined"&&n.length==i&&n.pop();n.splice(0,0,t)}function s(){let n=[],t=helper.localStorage.get(u);typeof t!="undefined"&&(n=t.split(","));$("span.emoji-nearest").html("");n.forEach(function(n){$("span.emoji-nearest").append(n)});n.length==0?$(".caption-emoji").hide():$(".caption-emoji").show()}var i="",r=undefined,n=[],u="posts:emoji-nearest",t;(function(){i=unescape($("#d-f-standand").text());r=i.split(" ");n.push(i);let f=JSON.parse($("#d-f-sign").text());if(f.map(t=>{n.push(unescape(t.fontSign))}),typeof Storage!="undefined")for(var t=0;t<3;t++){let n=localStorage.getItem("hl-posts-template-index-"+t);if(n){let t="<li>"+unescape(n)+"<\/li>";$("ul.font-template-items").append(t)}}let e=JSON.parse($("#d-f-sign-template").text());e.map(n=>{let t="<li>"+unescape(n.fontSign)+"<\/li>";$("ul.font-template-items").append(t)});$(".load-convert").hide();$("span.copy-status").hide();let u="";$(n).each(function(){u+="<li><\/li>"});$(".mshop-tool-post.tool ul").html(u);s()})();t=!1;$(".mshop-tool-post.tool ul li").on("click",function(n){let t=$(n.target).data("start-select"),u=$(n.target).data("end-select"),i=$(n.target).data("vlue");if(typeof i!="undefined"){let r=$(".content-edit textarea").val(),f=r.substring(0,t)+i+r.substring(u);$(".content-edit textarea").val(f);$(".content-edit textarea")[0].setSelectionRange(t,t+i.length);$(".content-edit textarea")[0].focus()}});$(".mshop-tool-post.content textarea").select(function(n){let o=$(n.target).val(),r=$(n.target)[0].selectionStart,u=$(n.target)[0].selectionEnd,i=o.substring(r,u);t||(i=e(i),$(".mshop-tool-post.tool ul li").each(function(n,t){let h=i.split(""),r=f(n,h),u=r.split(" "),e="",o=0;u.forEach(function(n){o<=8&&(e+=n+" ");o++});let s="";u.length>9&&(s="...");$(t).data("vlue",r);$(t).text(e+s)}),$(".mshop-tool-post.tool ul li").data("start-select",r),$(".mshop-tool-post.tool ul li").data("end-select",u))});$(document).on("click",".category p, .emoji-nearest p",function(n){let t=$(n.target).text(),i=$(".content-edit textarea")[0].selectionStart,u=$(".content-edit textarea")[0].selectionEnd,r=$(".content-edit textarea").val(),f=r.substring(0,i)+t+r.substring(u);$(".content-edit textarea").val(f);$(".content-edit textarea")[0].selectionEnd=i+t.length;$(".content-edit textarea")[0].focus()});$("#btn-copy").on("click",function(){t=!0;$(".mshop-tool-post.content textarea").select();document.execCommand("copy");$("span.copy-status").show();setTimeout(function(){$("span.copy-status").fadeOut(1500);t=!1},1500)});$(".template ul li").on("click",function(n){let t=$(n.target).text(),i=$(".content-edit textarea")[0].selectionStart,u=$(".content-edit textarea")[0].selectionEnd,r=$(".content-edit textarea").val(),f=r.substring(0,i)+t+r.substring(u);$(".content-edit textarea").val(f);$(".content-edit textarea")[0].selectionEnd=i+t.length;$(".content-edit textarea")[0].focus()});$(".font-change-case button").on("click",function(n){let u=$(n.target).data("a"),r=$(".content-edit textarea")[0].selectionStart,s=$(".content-edit textarea")[0].selectionEnd,o=$(".content-edit textarea").val(),i=o.substring(r,s),c=h(i),t=e(i);u=="lower-case"&&(t=t.toLowerCase());u=="upper-case"&&(t=t.toUpperCase());u=="upper-character-case"&&(t=t.toLowerCase().split(" ").map(function(n){return n[0].toUpperCase()+n.substr(1)}).join(" "));i=f(c,t.split(""));let l=o.substring(0,r)+i+o.substring(s);$(".content-edit textarea").val(l);$(".content-edit textarea")[0].setSelectionRange(r,r+i.length);$(".content-edit textarea")[0].focus()});$(".emoji-item-list p").on("click",function(n){let t=n.target.outerHTML;t=$(t).css("background-image",$(n.target).closest(".category").css("background-image"))[0].outerHTML;let i=[],r=helper.localStorage.get(u);typeof r!="undefined"?(i=r.split(","),o(i,t,8)):o(i,t);helper.localStorage.set(u,i.toString());s()})})(),function(n){var r=n.find("button").first(),t=n.find("input[name=name]").first(),i=n.find("input[name=description]").first();r.on("click",function(){t.val()!=""&&i.val()!=""&&$.post("/tool/posts/feedback",{name:t.val(),description:i.val()})})}($("#feedback-form")),function(){function t(n){n.addEventListener("click",()=>{const r=n.getAttribute("data-modal-trigger"),t=document.querySelector(`[data-modal=${r}]`),u=t.querySelector(".content-wrapper"),f=t.querySelector(".close");f.addEventListener("click",()=>t.classList.remove("open"));t.addEventListener("click",()=>t.classList.remove("open"));u.addEventListener("click",n=>n.stopPropagation());for(var i=0;i<3;i++){let n=localStorage.getItem("hl-posts-template-index-"+i);n&&($(".modal[data-modal] .content input")[i].value=unescape(n))}t.classList.toggle("open")})}var n=document.querySelectorAll(".trigger[data-modal-trigger]");for(let n of n)t(n);$(".btn-save-template-user").on("click",function(){typeof Storage!="undefined"&&($(".modal[data-modal] .content input").each(function(n,t){n<3&&t.value.trim()!=""&&localStorage.setItem("hl-posts-template-index-"+n,escape(t.value));t.value.trim()==""&&localStorage.removeItem("hl-posts-template-index-"+n)}),location.reload())})}();